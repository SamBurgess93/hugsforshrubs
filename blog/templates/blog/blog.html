{% extends "base.html" %}
{% load static %}
{% block page_header %}
<div class="container">
    <div class="row">
        <div class="col"></div>
    </div>
</div>
{% endblock %}
<!-- Blog intro text -->
{% block content %}
<div class="overlay"></div>   
<div class="container-fluid blog-headline">
    <div class="row">
        <div class="col text-center mt-3">
            <h2 class="logo-font header-text">Blog</h2>
            <hr class="w-50 mb-1">
             <!-- Create post btn -->
             <div class="create-post-btn"> <a href="{% url 'create' %}" class="btn btn-dark text-uppercase">Create your blog post</a> </div>
        </div>
    </div>
    <br>
    <!-- Blog post -->
    <div class="col-lg-12">
        {% for post in blog_posts %}
        <div class="blog-post-container">
            <div class="blog-body">
                <!-- Post title -->
                <h2 class="blog-title text-uppercase">{{ post.title }}</h2>
                {% if request.user.is_superuser or review.username == request.user %}
                    <small class="ml-3">
                        <a href="{% url 'edit_blog' blog.id %}">Edit</a> | 
                    </small>
                {% endif %}
                <p class="blog-author text-muted h6">By {{ post.author }} | {{ post.date_published |date:'D d M Y'}}</p>
                <!-- Post body collapsed -->
                <p>{{post.body|slice:":200" }}...</p>
                <!-- Read more btn -->
                <a class="btn btn-primary read-more btn-black" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
                    Read More &rarr;
                </a>
                <br>
                <div class="collapse" id="collapseExample">
                    <!-- Post body uncollapsed -->
                    <div class="blog-body">
                        {{ post.body }}
                    </div>
                </div>
                <!-- Post image -->
                <a href="{{ post.image.url }}">
                <img class="card-img-top img-fluid blog-image" src="{{ post.image.url }}" alt="Uploaded blog post image">
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
<div class="space-maker"></div>
{% endblock %}